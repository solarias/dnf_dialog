var i,j,k,l,v,w,x,y,z;var temp;var temp2;var temp3;var tempArr=[];var images="./images/";var listCha=[];var imageURLs;var imageList=[];var myImage="";var lenText=0;var page=-1;var step=0;var stepMax="0";var endPage="";var side="bottom";var lastSpeaker="";var autoPlay=1;var autoTemp=-1;var autoTime=1;var textSpeed=30;name="모험가";jobCode=90;classCode=1;var tempFile;var auto;var eventName="";var server=0;var targeting=0;var serverName=["카인","디레지에","시로코","프레이","카시야스","힐더","안톤","바칼","레이드"];var A_channelList=[["통합 채널 / 실버크라운 CH 1","통합 채널 / 실버크라운 CH 2","통합 채널 / 실버크라운 CH 3","통합 채널 / 실버크라운 CH 4","통합 채널 / 실버크라운 CH 5","통합 채널 / 실버크라운 CH 6","통합 채널 / 실버크라운 CH 7","통합 채널 / 실버크라운 CH 8","통합 채널 / 실버크라운 CH 9","통합 채널 / 실버크라운 CH 11","통합 채널 / 실버크라운 CH 12","통합 채널 / 실버크라운 CH 13","통합 채널 / 실버크라운 CH 14","통합 채널 / 실버크라운 CH 15","통합 채널 / 실버크라운 CH 16","통합 채널 / 실버크라운 CH 17","통합 채널 / 실버크라운 CH 18","통합 채널 / 실버크라운 CH 19","통합 채널 / 멜트다운 CH 1","통합 채널 / 멜트다운 CH 2","통합 채널 / 멜트다운 CH 3","통합 채널 / 멜트다운 CH 4","통합 채널 / 멜트다운 CH 5","통합 채널 / 멜트다운 CH 6","통합 채널 / 멜트다운 CH 7","통합 채널 / 멜트다운 CH 8","통합 채널 / 멜트다운 CH 9","통합 채널 / 멜트다운 CH 11","통합 채널 / 멜트다운 CH 12","통합 채널 / 멜트다운 CH 13","통합 채널 / 멜트다운 CH 14","통합 채널 / 멜트다운 CH 15","통합 채널 / 멜트다운 CH 16","통합 채널 / 멜트다운 CH 17","통합 채널 / 멜트다운 CH 18","통합 채널 / 멜트다운 CH 19","통합 채널 / 표류동굴 CH 1","통합 채널 / 표류동굴 CH 2","통합 채널 / 표류동굴 CH 3","통합 채널 / 표류동굴 CH 4","통합 채널 / 표류동굴 CH 5","통합 채널 / 표류동굴 CH 6","통합 채널 / 표류동굴 CH 7","통합 채널 / 표류동굴 CH 8","통합 채널 / 표류동굴 CH 9","통합 채널 / 표류동굴 CH 11","통합 채널 / 표류동굴 CH 12","통합 채널 / 표류동굴 CH 13","통합 채널 / 표류동굴 CH 14","통합 채널 / 표류동굴 CH 15","통합 채널 / 표류동굴 CH 16","통합 채널 / 표류동굴 CH 17","통합 채널 / 표류동굴 CH 18","통합 채널 / 표류동굴 CH 19","통합 채널 / 역천의 폭포 CH 1","통합 채널 / 역천의 폭포 CH 2","통합 채널 / 역천의 폭포 CH 3","통합 채널 / 역천의 폭포 CH 4","통합 채널 / 역천의 폭포 CH 5","통합 채널 / 역천의 폭포 CH 6","통합 채널 / 역천의 폭포 CH 7","통합 채널 / 역천의 폭포 CH 8","통합 채널 / 역천의 폭포 CH 9","통합 채널 / 역천의 폭포 CH 11","통합 채널 / 역천의 폭포 CH 12","통합 채널 / 역천의 폭포 CH 13","통합 채널 / 체념의 빙벽 CH 14","통합 채널 / 체념의 빙벽 CH 15","통합 채널 / 체념의 빙벽 CH 16","통합 채널 / 체념의 빙벽 CH 17","통합 채널 / 체념의 빙벽 CH 18","통합 채널 / 체념의 빙벽 CH 19","통합 채널 / 체념의 빙벽 CH 21","통합 채널 / 체념의 빙벽 CH 22","통합 채널 / 체념의 빙벽 CH 23","통합 채널 / 체념의 빙벽 CH 24","통합 채널 / 체념의 빙벽 CH 25","통합 채널 / 안트베르 협곡 CH 1","통합 채널 / 안트베르 협곡 CH 2","통합 채널 / 안트베르 협곡 CH 3","통합 채널 / 안트베르 협곡 CH 4","통합 채널 / 안트베르 협곡 CH 5","통합 채널 / 안트베르 협곡 CH 6","통합 채널 / 안트베르 협곡 CH 7","통합 채널 / 안트베르 협곡 CH 8","통합 채널 / 안트베르 협곡 CH 9","통합 채널 / 해상열차 CH 1","통합 채널 / 해상열차 CH 2","통합 채널 / 해상열차 CH 3","통합 채널 / 해상열차 CH 4","통합 채널 / 시간의 문 CH 11","통합 채널 / 시간의 문 CH 12","통합 채널 / 시간의 문 CH 13","통합 채널 / 시간의 문 CH 14","통합 채널 / 시간의 문 CH 15","통합 채널 / 시간의 문 CH 16","통합 채널 / 시간의 문 CH 17","통합 채널 / 시간의 문 CH 18","통합 채널 / 시간의 문 CH 21","통합 채널 / 시간의 문 CH 22","통합 채널 / 시간의 문 CH 23","통합 채널 / 시간의 문 CH 27","통합 채널 / 파워 스테이션 CH 1","통합 채널 / 파워 스테이션 CH 2","통합 채널 / 파워 스테이션 CH 3","통합 채널 / 파워 스테이션 CH 4","통합 채널 / 파워 스테이션 CH 5","통합 채널 / 파워 스테이션 CH 6","통합 채널 / 파워 스테이션 CH 7","통합 채널 / 파워 스테이션 CH 8","통합 채널 / 파워 스테이션 CH 9","통합 채널 / 노블 스카이 CH 21","통합 채널 / 노블 스카이 CH 22","통합 채널 / 노블 스카이 CH 23","통합 채널 / 노블 스카이 CH 24","통합 채널 / 죽은자의 성 CH 21","통합 채널 / 죽은자의 성 CH 22","통합 채널 / 죽은자의 성 CH 23","통합 채널 / 죽은자의 성 CH 24","통합 채널 / 죽은자의 성 CH 25","통합 채널 / 망자의 협곡 CH 21","통합 채널 / 망자의 협곡 CH 22","통합 채널 / 망자의 협곡 CH 23","통합 채널 / 망자의 협곡 CH 24","통합 채널 / 망자의 협곡 CH 25","통합 채널 / 차원의 균열 CH 11","통합 채널 / 차원의 균열 CH 12","통합 채널 / 차원의 균열 CH 13","통합 채널 / 차원의 균열 CH 14","통합 채널 / 차원의 균열 CH 15","통합 채널 / 차원의 균열 CH 16","통합 채널 / 차원의 균열 CH 17","통합 채널 / 차원의 균열 CH 18","통합 채널 / 차원의 균열 CH 19","통합 채널 / (구)이계 던전 CH 1","통합 채널 / (구)이계 던전 CH 2","통합 채널 / (구)이계 던전 CH 3","통합 채널 / (구)이계 던전 CH 4","통합 채널 / (구)이계 던전 CH 5","통합 채널 / (구)이계 던전 CH 6","통합 채널 / (구)이계 던전 CH 7","통합 채널 / (신)이계 던전 CH 8","통합 채널 / (신)이계 던전 CH 9","통합 채널 / (신)이계 던전 CH 11","통합 채널 / (신)이계 던전 CH 12","통합 채널 / (신)이계 던전 CH 13","통합 채널 / (신)이계 던전 CH 14","통합 채널 / (신)이계 던전 CH 15","통합 채널 / 고대 던전 CH 16","통합 채널 / 고대 던전 CH 30","통합 채널 / 거래 - 경매장 CH 16","통합 채널 / 거래 - 경매장 CH 17","일반 채널 / 거래 - 경매장","일반 채널 / 일반채널 (첫번째)","일반 채널 / 일반채널 (두번째)"],["안톤 공격대 CH 17","안톤 공격대 CH 18","안톤 공격대 CH 19","안톤 공격대 CH 21","안톤 공격대 CH 22","안톤 공격대 CH 23","안톤 공격대 CH 24","안톤 공격대 CH 25"]];var A_dungeonList_85=[["<span class='orange'>"],["푸르츠 발전소","트롬베 발전소","그란디네 발전소","매달린 망루","루크린제","강철의 브라키움","샐러맨더의 화로","빛의 연회장"],["</span>"]];var A_difficultyList_85=[["<span class='orange'>"],["노멀","익스퍼트","마스터","킹","슬레이어"],["</span>"]];var A_townList=[["<span class='orange'>"],["세리아방","실버크라운","시궁창","언더풋","베히모스","북의 쉼터","겐트","루프트하펜","쇼난","결투장","쿠룬달","슬라우 공업단지","노블 스카이","젤바","세인트 혼","웨스트코스트(미러아라드)"],["</span>"]];var A_npcList=[["<span class='orange'>"],["세리아방</span>의 <span class='orange'>세리아 키르민","세리아방</span>의 <span class='orange'>루나","실버크라운</span>의 <span class='orange'>청색의 수호자 비탈라","실버크라운</span>의 <span class='orange'>연금술사 모건","시궁창</span>의 <span class='orange'>시궁창 공주 패리스","시궁창</span>의 <span class='orange'>슈시아","시궁창</span>의 <span class='orange'>싸움개 로엘","시궁창</span>의 <span class='orange'>알베르트 번스타인","시궁창</span>의 <span class='orange'>샤일록 고블린드","시궁창</span>의 <span class='orange'>스카디 여왕","언더풋</span>의 <span class='orange'>메이아 여왕","언더풋</span>의 <span class='orange'>장로 사프론","언더풋</span>의 <span class='orange'>클론터","언더풋</span>의 <span class='orange'>키리 더 레이디","언더풋</span>의 <span class='orange'>그란디스 그라시아","언더풋</span>의 <span class='orange'>아이리스 포춘싱어","언더풋</span>의 <span class='orange'>조안 페레로","언더풋</span>의 <span class='orange'>초붕","언더풋</span>의 <span class='orange'>오란 할머니","언더풋</span>의 <span class='orange'>칸나","언더풋</span>의 <span class='orange'>아벨로","언더풋</span>의 <span class='orange'>게시판","언더풋</span>의 <span class='orange'>버켄","언더풋</span>의 <span class='orange'>로저 레빈","언더풋</span>의 <span class='orange'>다프네 마브로","언더풋</span>의 <span class='orange'>시모나","언더풋</span>의 <span class='orange'>마를렌 키츠카","언더풋</span>의 <span class='orange'>단진","언더풋</span>의 <span class='orange'>하츠 폰 크루거","언더풋</span>의 <span class='orange'>아니스 바인스타이","언더풋</span>의 <span class='orange'>GSD","언더풋</span>의 <span class='orange'>풍진","언더풋</span>의 <span class='orange'>샤란","언더풋</span>의 <span class='orange'>미네트","언더풋</span>의 <span class='orange'>나이트 로바토","베히모스</span>의 <span class='orange'>오필리아 베이그란스","베히모스</span>의 <span class='orange'>이사도라","베히모스</span>의 <span class='orange'>돌격대장 반젤리스","베히모스</span>의 <span class='orange'>카곤","베히모스</span>의 <span class='orange'>신다","베히모스</span>의 <span class='orange'>라이너스","북의 쉼터</span>의 <span class='orange'>브왕가","북의 쉼터</span>의 <span class='orange'>아간조","북의 쉼터</span>의 <span class='orange'>민타이","북의 쉼터</span>의 <span class='orange'>미쉘 모나헌","북의 쉼터</span>의 <span class='orange'>발레나","겐트</span>의 <span class='orange'>멜빈 리히터","겐트</span>의 <span class='orange'>모래바람의 베릭트","겐트</span>의 <span class='orange'>젤딘 슈나이더","겐트</span>의 <span class='orange'>황녀 에르제","겐트</span>의 <span class='orange'>반 발슈테트","루프트하펜</span>의 <span class='orange'>베른 보네거트","루프트하펜</span>의 <span class='orange'>초롱이","쇼난</span>의 <span class='orange'>쇼난 아스카","쇼난</span>의 <span class='orange'>시란","쇼난</span>의 <span class='orange'>우","쇼난</span>의 <span class='orange'>준","결투장</span>의 <span class='orange'>하루","결투장</span>의 <span class='orange'>시즈키","쿠룬달</span>의 <span class='orange'>백명","쿠룬달</span>의 <span class='orange'>구룡","슬라우 공업단지</span>의 <span class='orange'>리아 리히터","슬라우 공업단지</span>의 <span class='orange'>마티어스 네스만","슬라우 공업단지</span>의 <span class='orange'>중장 니베르","슬라우 공업단지</span>의 <span class='orange'>페럴 웨인","노블 스카이</span>의 <span class='orange'>하이람 클라프","노블 스카이</span>의 <span class='orange'>잭터 이글아이","노블 스카이</span>의 <span class='orange'>운 라이오닐","노블 스카이</span>의 <span class='orange'>나엔 시거","젤바</span>의 <span class='orange'>네빌로 유르겐","젤바</span>의 <span class='orange'>메릴 파이오니어","젤바</span>의 <span class='orange'>헌터 폰","젤바</span>의 <span class='orange'>제 3 황녀 이자벨라","젤바</span>의 <span class='orange'>하츠 폰 크루거","젤바</span>의 <span class='orange'>아젤리아 로트","젤바</span>의 <span class='orange'>사냥개 사이러스","젤바</span>의 <span class='orange'>로이 더 버닝펜","젤바</span>의 <span class='orange'>파란만장 에리카","젤바</span>의 <span class='orange'>다나 도나텔","세인트 혼</span>의 <span class='orange'>캡틴 루터","세인트 혼</span>의 <span class='orange'>신궁 루드밀라","세인트 혼</span>의 <span class='orange'>나탈리아 수","웨스트코스트</span>의 <span class='orange'>로리안","웨스트코스트</span>의 <span class='orange'>카곤","웨스트코스트</span>의 <span class='orange'>민타이","웨스트코스트</span>의 <span class='orange'>오르카","웨스트코스트</span>의 <span class='orange'>로톤"],["</span>"]];var A_timeList=[["<span class='orange'>"],["오전","오후"],["</span>, <span class='orange'>"],[1,2,3,4,5,6,7,8,9,10,11,12],["</span>시, <span class='orange'>"],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],["</span>분, <span class='orange'>"],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],["</span>초"]];var A_fortuneList=["대대길(大大吉)","대길(大吉)","중길(中吉)","소길(小吉)","말길(末吉)","평(平)","말흉(末凶)","소흉(小凶)","중흉(中凶)","대흉(大凶)","대대흉(大大凶)"];var A_fortuneWeight=[5,35,70,120,170,200,170,120,70,35,5];var A_soraList=["그래.","아니, 하지마."];var answer=[[""],[""],[""],[""],[""]];var answer_server;var answer_fortune;var answer_sora;function getAnswer(){if(eventName=="내캐릭터"){Math.seedrandom(name+(new Date().getTime()))}else{if(tempFile.indexOf("_")!=-1){Math.seedrandom(tempFile.split("_")[1]+(new Date().getTime()))}else{Math.seedrandom(tempFile+(new Date().getTime()))}}answer_server="<span class='orange'>"+serverName[server]+"</span>";if(server!=9){temp=Math.floor(Math.random()*A_channelList[0].length)}else{temp=Math.floor(Math.random()*A_channelList[1].length)}answer[0]="";switch(server){case 9:answer[0]+="채널은 <span class='orange'>'"+A_channelList[1][temp]+"'</span>이(가)";break;default:answer[0]+="채널은 <span class='orange'>'"+A_channelList[0][temp]+"'</span>이(가)";break}answer[1]="";answer[1]="시간은 ";for(i=0;i<A_timeList.length;i++){temp=Math.floor(Math.random()*A_timeList[i].length);answer[1]+=A_timeList[i][temp].toString()}answer[1]+="가";answer[2]="";answer[2]="지역을 고른다면 ";for(i=0;i<A_townList.length;i++){temp=Math.floor(Math.random()*A_townList[i].length);answer[2]+=A_townList[i][temp].toString()}answer[2]+="이(가)";answer[3]="";answer[3]="사람을 만난다면 ";for(i=0;i<A_npcList.length;i++){temp=Math.floor(Math.random()*A_npcList[i].length);answer[3]+=A_npcList[i][temp].toString()}answer[3]+="이(가)";answer[4]="";answer[4]+="지옥파티는 ";for(i=0;i<A_dungeonList_85.length;i++){temp=Math.floor(Math.random()*A_dungeonList_85[i].length);answer[4]+=A_dungeonList_85[i][temp].toString()}answer[4]+=" 던전과 ";for(i=0;i<A_difficultyList_85.length;i++){temp=Math.floor(Math.random()*A_difficultyList_85[i].length);answer[4]+=A_difficultyList_85[i][temp].toString()}answer[4]+=" 난이도가";for(i=0;i<A_fortuneWeight.length;i++){for(j=0;j<A_fortuneWeight[i];j++){tempArr.push(A_fortuneList[i])}}temp=Math.floor(Math.random()*tempArr.length);answer_fortune="'			<span class='orange'>			"+tempArr[temp]+"			</span>'";temp=Math.floor(Math.random()*A_soraList.length);answer_sora="<span class='orange'>		 "+A_soraList[temp]+"		 </span>"}function shuffle(){getAnswer();loadJs("./91/1/"+tempFile+".js?cachebuster="+new Date().getTime(),function(){return})}function getURLParameter(b,c){var a=decodeURIComponent((new RegExp("[#|&]"+b+"=([^&;]+?)(&|#|;|$)").exec(location.hash)||[,""])[1].replace(/\+/g,"%20"))||null;if(a!=null){return a}else{return c}}function loadJs(c,b){var a=document.createElement("script");a.type="text/javascript";if(a.readyState){a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;b()}}}else{a.onload=function(){b()}}a.src=c;a.async=true;document.getElementsByTagName("head")[0].appendChild(a)}function loadImages(a,f){var e=[];var b;var d=a.length;for(var c=0;c<a.length;c++){b=new Image();b.onload=function(){document.getElementById("start").innerHTML="			그림 로딩 ("+Math.round((((a.length-d+1)/a.length)*100),0).toString()+"%)";--d;if(d<=0){f()}};b.onerror=function(){document.getElementById("start").innerHTML="			그림 로딩 ("+Math.round((((a.length-d+1)/a.length)*100),0).toString()+"%)";--d;if(d<=0){f()}};b.src=a[c];document.getElementById("imagePreloader").innerHTML+="		<img src='"+b.src+"'>";e.push(b)}}function getNatural(c,a){var b=new Image();b.src=c.src;if(a=="width"){return b.width}else{if(a=="height"){return b.height}}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}function getPage(a){if(a<cha.length-1&&eventName=="내캐릭터"){for(y=0;y<text.length;y++){if(a!=0&&cha[a][0]!=""&&cha[a][0]==text[y][0]){document.getElementById("main").innerHTML+="					<img class='middle' id='img"+cha[a][2]+"' src='"+images+"portrait/"+cha[a][2]+".png' style='width:auto;max-width:190px;' />";listCha.push(cha[a][2]);break}}getPage(a+1)}else{if(a<cha.length-1&&eventName==""){for(y=0;y<text.length;y++){if(cha[a][0]!=""&&cha[a][0]==text[y][0]){document.getElementById("main").innerHTML+="					<img class='middle' id='img"+cha[a][2]+"' src='"+images+"portrait/"+cha[a][2]+".png' style='width:auto;max-width:190px;' />";listCha.push(cha[a][2]);break}}getPage(a+1)}else{if(eventName=="내캐릭터"){if(myImage!=""){document.getElementById("main").innerHTML+="					<img class='middle' id='img"+cha[0][2]+"' src='"+myImage+"' style='width:auto;max-width:190px;' />"}else{document.getElementById("main").innerHTML+="					<img class='middle' id='img"+cha[0][2]+"' src='"+images+"portrait/"+cha[0][2]+".png' style='width:auto;max-width:190px;' />"}listCha.push(cha[0][2])}if(front!=""){document.getElementById("main").style.backgroundImage="url('"+images+"front/"+front+".jpg')";document.getElementById("main").style.backgroundSize="700px 525px"}if(autoPlay==1){document.getElementById("auto").innerHTML="<span style='font-family:SSTM;color:lightgreen;'>자동</span> 재생중 ("+autoTime+"초)";document.getElementById("play").innerHTML="||"}else{document.getElementById("auto").innerHTML="<span style='font-family:SSTM;color:orange;'>수동</span> 재생중";document.getElementById("play").innerHTML="▶"}document.getElementById("play").onclick=function(){if(autoPlay==1){document.getElementById("popup").innerHTML="자동재생 실행";clearAuto()}else{if(page==lenText-1){document.getElementById("popup").style.backgroundColor="orange";document.getElementById("popup").style.left="180px";document.getElementById("popup").innerHTML="자동재생 불가 : 마지막 페이지"}else{if(autoTemp!=-1){document.getElementById("popup").style.backgroundColor="orange";document.getElementById("popup").style.left="180px";document.getElementById("popup").innerHTML="자동재생 불가 : 분기점 선택 중"}else{document.getElementById("popup").innerHTML="자동재생 정지";document.getElementById("auto").innerHTML="<span style='font-family:SSTM;color:lightgreen;'>자동</span> 재생중 ("+autoTime+"초)";document.getElementById("play").innerHTML="||";autoPlay=1;if(endPage==1||page==-1){document.getElementById("start").onclick="none";document.getElementById("start").style.visibility="hidden";auto=setTimeout(function(){dialog(text,page+1)},autoTime*1000)}}}}};document.getElementById("title").innerHTML=title;document.getElementById("now").innerHTML=(step).toString()+"/"+stepMax;document.getElementById("start").innerHTML="시작";document.getElementById("cover").style.backgroundImage="url('"+images+"guide1.png')";document.getElementById("cover").className="starting";document.getElementById("start").onclick="none";document.getElementById("start").onclick=function(){clearAuto();document.getElementById("start").onclick="none";document.getElementById("start").style.visibility="hidden";dialog(text,0)};if(autoPlay==1){auto=setTimeout(function(){document.getElementById("start").onclick="none";document.getElementById("start").style.visibility="hidden";dialog(text,0)},Math.max(autoTime*1000,3000))}document.getElementById("toBefore").onclick="none";document.getElementById("toBefore").onclick=function(){shuffle();if(page>=1){document.getElementById("start").onclick="none";document.getElementById("start").style.visibility="hidden";document.getElementById("choose1").style.top="425px";document.getElementById("choose2").style.top="456px";document.getElementById("choose3").style.top="487px";document.getElementById("choose4").style.top="518px";for(i=0;i<4;i++){document.getElementById("choose"+(i+1).toString()).onclick="none";document.getElementById("choose"+(i+1).toString()).style.visibility="hidden"}autoTemp=-1;clearAuto();endPage=1;if(page==1){step=0;document.getElementById("popup").style.backgroundColor="orange";document.getElementById("popup").style.left="297px";document.getElementById("popup").innerHTML="첫 페이지 입니다"}else{step-=2}if(document.querySelectorAll(".top").length>0){document.querySelectorAll(".top")[0].style.visibility="hidden"}if(document.querySelectorAll(".bottom").length>0){document.querySelectorAll(".bottom")[0].style.visibility="hidden"}document.getElementById("top").style.visibility="hidden";document.getElementById("bottom").style.visibility="hidden";if(document.getElementById("changeBack").style.backgroundImage!=""){document.getElementById("main").style.backgroundImage=document.getElementById("changeBack").style.backgroundImage;document.getElementById("changeBack").style.backgroundImage="";document.getElementById("changeBack").style.left="100%";document.getElementById("changeBack").style.visibility="hidden"}document.getElementById("toNext").style.paddingTop="5px";document.getElementById("toNext").style.paddingLeft="24px";document.getElementById("toNext").style.width="140px";document.getElementById("toNext").style.height="26px";document.getElementById("toNext").style.backgroundColor="";document.getElementById("toNext").style.backgroundPosition="";document.getElementById("toNext").style.backgroundRepeat="";document.getElementById("toNext").style.border="";document.getElementById("now").innerHTML=(step).toString()+"/"+stepMax;dialog(text,page-1)}else{document.getElementById("popup").style.backgroundColor="orange";document.getElementById("popup").style.left="297px";document.getElementById("popup").innerHTML="첫 페이지 입니다"}};document.getElementById("return").onclick="none";document.getElementById("return").onclick=function(){shuffle();document.getElementById("popup").style.visibility="hidden";clearAuto();if(page>=0){document.getElementById("choose1").style.top="425px";document.getElementById("choose2").style.top="456px";document.getElementById("choose3").style.top="487px";document.getElementById("choose4").style.top="518px";for(i=0;i<4;i++){document.getElementById("choose"+(i+1).toString()).onclick="none";document.getElementById("choose"+(i+1).toString()).style.visibility="hidden"}document.getElementById("sprite").style.visibility="hidden";document.getElementById("changeSprite").style.visibility="hidden";endPage=1;page=-1;step=0;document.getElementById("changeBack").style.backgroundImage="";document.getElementById("changeBack").style.left="100%";document.getElementById("changeBack").style.visibility="hidden";document.getElementById("main").style.backgroundImage="url('"+images+"front/"+front+".jpg')";document.getElementById("main").style.backgroundSize="700px 525px";if(document.querySelectorAll(".top").length>0){document.querySelectorAll(".top")[0].style.visibility="hidden"}if(document.querySelectorAll(".bottom").length>0){document.querySelectorAll(".bottom")[0].style.visibility="hidden"}document.getElementById("top").style.visibility="hidden";document.getElementById("bottom").style.visibility="hidden";document.getElementById("toNext").style.paddingTop="5px";document.getElementById("toNext").style.paddingLeft="24px";document.getElementById("toNext").style.width="140px";document.getElementById("toNext").style.height="26px";document.getElementById("toNext").style.backgroundColor="";document.getElementById("toNext").style.backgroundPosition="";document.getElementById("toNext").style.backgroundRepeat="";document.getElementById("toNext").style.border="";document.getElementById("toNext").style.visibility="hidden";document.getElementById("now").innerHTML=(step).toString()+"/"+stepMax;document.getElementById("cover").onclick="none"}document.getElementById("start").innerHTML="시작";document.getElementById("cover").style.backgroundImage="url('"+images+"guide1.png')";document.getElementById("cover").className="starting";document.getElementById("start").style.visibility="visible";document.getElementById("start").onclick="none";document.getElementById("start").onclick=function(){clearAuto();document.getElementById("start").onclick="none";document.getElementById("start").style.visibility="hidden";dialog(text,0)}}}}}function indexCha(b,a){for(w=0;w<cha.length;w++){if(cha[w][0]==b){if(a==0){return w}else{if(a==1){return cha[w][1]}else{return cha[w][2]}}}}}function indexCoop(a,b){for(w=0;w<coop.length;w++){if(coop[w][0]==a){return coop[w][b]}}return false}function skip(){endPage=1}function spin(){if(side=="top"){side="bottom"}else{side="top"}}function clearAuto(){clearTimeout(auto);document.getElementById("auto").innerHTML="<span style='font-family:SSTM;color:orange;'>수동</span> 재생중";document.getElementById("play").innerHTML="▶";autoPlay=0}function stopAuto(){clearTimeout(auto);document.getElementById("popup").innerHTML="자동재생 실행";document.getElementById("auto").innerHTML="<span style='font-family:SSTM;color:orange;'>분기점</span> 선택중";document.getElementById("play").innerHTML="▶";autoPlay=0}function wording(a,d,c,b){option_Dialog=d[2];option_Script=d[4];if(b==page){if(option_Dialog=="0"&&option_Dialog!=""){d[3]=Array(50).join("a");document.getElementById("changeBack").style.left=((1-c/(d[3].length))*100).toString()+"%"}else{if((d[3].substr(0,c+1).match(/</g)||[]).length==(d[3].substr(0,c+1).match(/>/g)||[]).length){document.getElementById(a).innerHTML=d[3].substr(0,c+1)}else{c++;wording(a,d,c,b);return}}if(c<d[3].length){if(endPage==1){c=d[3].length;setTimeout(function(){wording(a,d,c,b)},0)}else{if(option_Dialog=="0"&&option_Dialog!=""){c++;setTimeout(function(){wording(a,d,c,b)},10)}else{c++;setTimeout(function(){wording(a,d,c,b)},textSpeed)}}}else{if(page<lenText-1){endPage=1;if(option_Dialog=="0"&&option_Dialog!=""){document.getElementById("main").style.backgroundImage=document.getElementById("changeBack").style.backgroundImage;document.getElementById("changeBack").style.backgroundImage="";document.getElementById("changeBack").style.left="100%";document.getElementById("changeBack").style.visibility="hidden";document.getElementById("sprite").style.visibility="visible";document.getElementById("sprite").style.width=null;document.getElementById("sprite").style.height=null;document.getElementById("sprite").src=document.getElementById("changeSprite").src;document.getElementById("sprite").style.bottom=document.getElementById("changeSprite").style.bottom;document.getElementById("sprite").style.left=document.getElementById("changeSprite").style.left;document.getElementById("sprite").style.width=(parseInt(getNatural(document.getElementById("sprite"),"width"))*0.875).toString()+"px";document.getElementById("sprite").style.height="auto";document.getElementById("changeSprite").src="";document.getElementById("changeSprite").style.visibility="hidden"}if(!option_Script||option_Script.constructor!==Array){if(typeof option_Script=="number"){temp=option_Script}else{temp=1}document.getElementById("toNext").style.backgroundImage="url('"+images+"dialog_enter.png')";document.getElementById("cover").onclick="none";document.getElementById("cover").onclick=function(){clearAuto();dialog(text,page+temp)};if(autoPlay==1){if(option_Dialog=="0"&&option_Dialog!=""){auto=setTimeout(function(){dialog(text,page+temp)},Math.max(autoTime*1000,3000))}else{auto=setTimeout(function(){dialog(text,page+temp)},autoTime*1000)}}}else{autoTemp=autoPlay;stopAuto();if(option_Dialog=="2"){document.getElementById("bottom").style.visibility="visible";document.getElementById("bottom").style.opacity=1;document.getElementById("bottomName").innerHTML="";document.getElementById("bottomText").innerHTML="";document.getElementById("choose1").style.top="394px";document.getElementById("choose2").style.top="425px";document.getElementById("choose3").style.top="456px";document.getElementById("choose4").style.top="487px"}document.getElementById("toNext").style.visibility="hidden";document.getElementById("cover").onclick="none";for(i=0;i<option_Script.length;i++){if(d[4][i]!=undefined){document.getElementById("choose"+(i+1).toString()).style.visibility="visible";document.getElementById("choose"+(i+1).toString()).innerHTML=d[i+5];document.getElementById("choose"+(i+1).toString()).onclick="none";document.getElementById("choose"+(i+1).toString()).onclick=function(e){return function(){if(option_Dialog=="2"){document.getElementById("bottom").style.visibility="hidden";document.getElementById("choose1").style.top="425px";document.getElementById("choose2").style.top="456px";document.getElementById("choose3").style.top="487px";document.getElementById("choose4").style.top="518px"}for(i=0;i<option_Script.length;i++){document.getElementById("choose"+(i+1).toString()).style.visibility="hidden"}if(autoTemp==1){autoPlay=1;document.getElementById("popup").innerHTML="자동재생 정지";document.getElementById("auto").innerHTML="<span style='font-family:SSTM;color:lightgreen;'>자동</span> 재생중 ("+autoTime+"초)";document.getElementById("play").innerHTML="||"}else{document.getElementById("popup").innerHTML="자동재생 실행";document.getElementById("auto").innerHTML="<span style='font-family:SSTM;color:orange;'>수동</span> 재생중";document.getElementById("play").innerHTML="▶"}autoTemp=-1;dialog(text,page+d[4][e])}}(i)}}}}else{clearAuto();if(option_Dialog=="0"&&option_Dialog!=""){document.getElementById("main").style.backgroundImage=document.getElementById("changeBack").style.backgroundImage;document.getElementById("changeBack").style.backgroundImage="";document.getElementById("changeBack").style.left="100%";document.getElementById("changeBack").style.visibility="hidden";document.getElementById("sprite").style.visibility="visible";document.getElementById("sprite").style.width=null;document.getElementById("sprite").style.height=null;document.getElementById("sprite").src=document.getElementById("changeSprite").src;document.getElementById("sprite").style.bottom=document.getElementById("changeSprite").style.bottom;document.getElementById("sprite").style.left=document.getElementById("changeSprite").style.left;document.getElementById("sprite").style.width=(parseInt(getNatural(document.getElementById("sprite"),"width"))*0.875).toString()+"px";document.getElementById("sprite").style.height="auto";document.getElementById("changeSprite").src="";document.getElementById("changeSprite").style.visibility="hidden"}document.getElementById("cover").onclick="none";document.getElementById("start").innerHTML="끝";document.getElementById("cover").style.backgroundImage="url('"+images+"guide2.png')";document.getElementById("cover").className="ending";document.getElementById("start").style.visibility="visible";document.getElementById("toNext").style.paddingTop="5px";document.getElementById("toNext").style.paddingLeft="24px";document.getElementById("toNext").style.width="140px";document.getElementById("toNext").style.height="26px";document.getElementById("toNext").style.backgroundColor="";document.getElementById("toNext").style.backgroundPosition="";document.getElementById("toNext").style.backgroundRepeat="";document.getElementById("toNext").style.border="";document.getElementById("toNext").style.visibility="hidden"}}}}function dialog(b,a){endPage=0;page=a;step+=1;if(b[a][2]=="3"){if(a+b[a][4]==0){step=0;document.getElementById("popup").style.backgroundColor="orange";document.getElementById("popup").style.left="297px";document.getElementById("popup").innerHTML="첫 페이지 입니다"}else{step-=1}dialog(b,a+b[a][4]);return}document.getElementById("now").innerHTML=(step).toString()+"/"+stepMax;document.getElementById("cover").style.backgroundImage="url('"+images+"guide0.png')";document.getElementById("cover").className="";document.getElementById("cover").onclick="none";document.getElementById("cover").onclick=function(){clearAuto();skip()};document.getElementById("changeBack").style.backgroundImage="";document.getElementById("changeBack").style.left="100%";document.getElementById("changeBack").style.visibility="hidden";document.getElementById("changeSprite").style.backgroundImage="";document.getElementById("changeSprite").style.left="100%";document.getElementById("changeSprite").style.visibility="hidden";if(b[a][1]!=""&&b[a][2]!="0"){document.getElementById("main").style.backgroundImage="url('"+images+"back/"+b[a][1]+".jpg')";if(indexCoop(b[a][1],0)){document.getElementById("sprite").style.visibility="visible";document.getElementById("sprite").style.width=null;document.getElementById("sprite").style.height=null;if(eventName=="내캐릭터"){document.getElementById("sprite").src=images+"character/"+classCode.split("_")[0]+"_"+indexCoop(b[a][1],1)+".png"}document.getElementById("sprite").style.width=(parseInt(getNatural(document.getElementById("sprite"),"width"))*0.875).toString()+"px";document.getElementById("sprite").style.height="auto";document.getElementById("sprite").style.bottom=indexCoop(b[a][1],3).toString()+"px";document.getElementById("sprite").style.left=indexCoop(b[a][1],2).toString()+"px"}else{document.getElementById("sprite").style.visibility="hidden"}document.getElementById("main").style.backgroundSize="700px 525px"}if(a==0&&b[a][2]!="2"){side="bottom"}else{if(b[a][2]=="0"||b[a][2]=="1"){for(x=0;x<listCha.length;x++){if(document.getElementById("img"+listCha[x]).className=="bottom"){document.getElementById("img"+listCha[x]).className="";document.getElementById("img"+listCha[x]).style.visibility="hidden"}else{if(document.getElementById("img"+listCha[x]).className=="top"){document.getElementById("img"+listCha[x]).className="";document.getElementById("img"+listCha[x]).style.visibility="hidden"}}}document.getElementById("top").style.visibility="hidden";document.getElementById("bottom").style.visibility="hidden";side="bottom"}else{if(b[a][2]=="2"){for(x=0;x<listCha.length;x++){if(document.getElementById("img"+listCha[x]).className=="bottom"){document.getElementById("img"+listCha[x]).className="";document.getElementById("img"+listCha[x]).style.visibility="hidden"}else{if(document.getElementById("img"+listCha[x]).className=="top"){document.getElementById("img"+listCha[x]).className="";document.getElementById("img"+listCha[x]).style.visibility="hidden"}}}document.getElementById("top").style.visibility="hidden";document.getElementById("bottom").style.visibility="hidden";side="top"}else{if(b[a][0]!=lastSpeaker){spin()}}}}if(b[a][2]!="0"){document.getElementById(side).style.visibility="visible";document.getElementById(side+"Name").innerHTML=indexCha(b[a][0],1);lastSpeaker=b[a][0]}if(b[a][2]=="0"){document.getElementById("toNext").style.top="496px";document.getElementById("toNext").style.left="239px";document.getElementById("toNext").style.visibility="visible";document.getElementById("toNext").style.paddingTop="4px";document.getElementById("toNext").style.paddingLeft="50px";document.getElementById("toNext").style.width="171px";document.getElementById("toNext").style.height="23px";document.getElementById("toNext").style.backgroundColor="#242424";document.getElementById("toNext").style.backgroundPosition="27px -1px";document.getElementById("toNext").style.backgroundRepeat="no-repeat";document.getElementById("toNext").style.border="1px gray solid"}else{if(side=="bottom"){for(x=0;x<listCha.length;x++){if(document.getElementById("img"+listCha[x]).className=="bottom"){document.getElementById("img"+listCha[x]).className="";document.getElementById("img"+listCha[x]).style.visibility="hidden"}else{if(document.getElementById("img"+listCha[x]).className=="top"){document.getElementById("img"+listCha[x]).style.opacity=0.7}}}document.getElementById("top").style.opacity=0.7;document.getElementById("img"+indexCha(b[a][0],2)).className="bottom";document.getElementById("img"+indexCha(b[a][0],2)).style.bottom="7px";document.getElementById("img"+indexCha(b[a][0],2)).style.left="10px";document.getElementById("img"+indexCha(b[a][0],2)).style.opacity=1;document.getElementById("img"+indexCha(b[a][0],2)).style.visibility="visible";document.getElementById("bottom").style.opacity=1;document.getElementById("toNext").style.top="488px";document.getElementById("toNext").style.left="445px";document.getElementById("toNext").style.visibility="visible";document.getElementById("toNext").style.paddingTop="5px";document.getElementById("toNext").style.paddingLeft="24px";document.getElementById("toNext").style.width="140px";document.getElementById("toNext").style.height="26px";document.getElementById("toNext").style.backgroundColor="";document.getElementById("toNext").style.backgroundPosition="";document.getElementById("toNext").style.backgroundRepeat="";document.getElementById("toNext").style.border=""}else{for(x=0;x<listCha.length;x++){if(document.getElementById("img"+listCha[x]).className=="top"){document.getElementById("img"+listCha[x]).className="";document.getElementById("img"+listCha[x]).style.visibility="hidden"}else{if(document.getElementById("img"+listCha[x]).className=="bottom"){document.getElementById("img"+listCha[x]).style.opacity=0.7}}}document.getElementById("bottom").style.opacity=0.7;document.getElementById("img"+indexCha(b[a][0],2)).className="top";document.getElementById("img"+indexCha(b[a][0],2)).style.bottom="310px";document.getElementById("img"+indexCha(b[a][0],2)).style.left="501px";document.getElementById("img"+indexCha(b[a][0],2)).style.opacity=1;document.getElementById("img"+indexCha(b[a][0],2)).style.visibility="visible";document.getElementById("top").style.opacity=1;document.getElementById("toNext").style.top="185px";document.getElementById("toNext").style.left="335px";document.getElementById("toNext").style.visibility="visible";document.getElementById("toNext").style.paddingTop="5px";document.getElementById("toNext").style.paddingLeft="24px";document.getElementById("toNext").style.width="140px";document.getElementById("toNext").style.height="26px";document.getElementById("toNext").style.backgroundColor="";document.getElementById("toNext").style.backgroundPosition="";document.getElementById("toNext").style.backgroundRepeat="";document.getElementById("toNext").style.border=""}}document.getElementById("toNext").style.backgroundImage="url('"+images+"dialog_skip.png')";if(b[a][2]=="0"){document.getElementById("changeBack").style.backgroundImage="url('"+images+"back/"+b[a][1]+".jpg')";document.getElementById("changeBack").style.backgroundSize="700px 525px";document.getElementById("changeBack").style.visibility="visible";if(indexCoop(b[a][1],0)){document.getElementById("changeSprite").style.visibility="visible";document.getElementById("changeSprite").style.width=null;document.getElementById("changeSprite").style.height=null;document.getElementById("changeSprite").src=images+"character/"+classCode.split("_")[0]+"_"+indexCoop(b[a][1],1)+".png";document.getElementById("changeSprite").style.width=(parseInt(getNatural(document.getElementById("changeSprite"),"width"))*0.875).toString()+"px";document.getElementById("changeSprite").style.height="auto";document.getElementById("changeSprite").style.bottom=indexCoop(b[a][1],3).toString()+"px";document.getElementById("changeSprite").style.left=indexCoop(b[a][1],2).toString()+"px"}else{document.getElementById("changeSprite").style.visibility="hidden"}}wording(side+"Text",b[a],0,page)}window.onload=function(){autoPlay=parseInt(getURLParameter("autoGo","1"));autoTime=parseInt(getURLParameter("displayTime","1"));textSpeed=parseInt(getURLParameter("speed","30"));name=getURLParameter("selectName","모험가");jobCode=parseInt(getURLParameter("selectJob","9"));classCode=getURLParameter("selectClass","4");server=parseInt(getURLParameter("selectServer","0"));myImage=getURLParameter("selectURL","");targeting=parseInt(getURLParameter("selectTarget","0"));tempFile=getURLParameter("selectFile","");if(tempFile=="9101_내캐릭터"){eventName="내캐릭터";cha[0][1]=name;if(myImage!=""){cha[0][2]=myImage}else{cha[0][2]="a"+classCode}}else{cha[0][1]=name;cha[0][2]="a"+(jobCode).toString()}getAnswer();if(tempFile){document.getElementById("start").innerHTML="대사집 로딩 중...";if(eventName=="내캐릭터"){tempFile="9101_"+classCode}loadJs("./91/1/"+tempFile+".js?cachebuster="+new Date().getTime(),function(){document.getElementById("start").innerHTML="그림 로딩 중...";imageList=[];for(i=0;i<text.length;i++){if(typeof text[i][1]!="undefined"){if(text[i][1]!=""){if(imageList.indexOf(images+"back/"+text[i][1]+".jpg")==-1){imageList.push(images+"back/"+text[i][1]+".jpg")}}}}if(myImage!=""){imageList.push(myImage)}for(i=0;i<cha.length;i++){for(j=0;j<text.length;j++){if(cha[i][0]!=""&&cha[i][0]==text[j][0]){imageList.push(images+"portrait/"+cha[i][2]+".png");break}}}if(front!=""){imageList.push(images+"front/"+front+".jpg")}if(eventName=="내캐릭터"){imageList.push(images+"character/"+classCode.split("_")[0]+"_L.png");imageList.push(images+"character/"+classCode.split("_")[0]+"_R.png")}else{imageList.push(images+"character/"+jobCode+"_L.png");imageList.push(images+"character/"+jobCode+"_R.png")}imageList.push(images+"guide0.png");imageList.push(images+"guide1.png");imageList.push(images+"guide2.png");imageList.push(images+"dialog_frame.png");imageList.push(images+"dialog_skip.png");imageList.push(images+"dialog_enter.png");imageList.push(images+"return.png");imageList.push(images+"radio0.png");imageList.push(images+"radio1.png");imageList.push(images+"radio2.png");loadImages(imageList,function(){document.getElementById("start").innerHTML="마무리 중...";lenText=0;for(i=0;i<text.length;i++){if(!(text[i][0]==""&&text[i][1]==""&&text[i][2]==""&&text[i][3]=="")){lenText+=1;if(text[i][4]){if(typeof text[i][4]=="number"||text[i][4].constructor===Array){stepMax="??"}}}}if(stepMax!="??"){stepMax=lenText.toString()}document.getElementById("return").onmouseover=function(){if(document.getElementById("cover").className!="starting"&&document.getElementById("cover").className!="ending"){document.getElementById("popup").style.top="505px";document.getElementById("popup").style.left="5px";document.getElementById("popup").innerHTML="첫 화면으로 돌아가기";document.getElementById("popup").style.visibility="visible"}};document.getElementById("return").onmouseout=function(){document.getElementById("popup").style.visibility="hidden"};document.getElementById("auto").onmouseover=function(){if(document.getElementById("cover").className!="starting"){document.getElementById("popup").style.top="505px";document.getElementById("popup").style.left="100px";document.getElementById("popup").innerHTML="현재 자동재생 실행 여부";document.getElementById("popup").style.visibility="visible"}};document.getElementById("auto").onmouseout=function(){document.getElementById("popup").style.visibility="hidden"};document.getElementById("play").onmouseover=function(){if(document.getElementById("cover").className!="starting"){document.getElementById("popup").style.top="505px";document.getElementById("popup").style.left="223px";if(autoPlay==1){document.getElementById("popup").innerHTML="자동재생 정지"}else{document.getElementById("popup").innerHTML="자동재생 실행"}document.getElementById("popup").style.visibility="visible"}};document.getElementById("play").onmouseout=function(){document.getElementById("popup").style.backgroundColor="yellow";document.getElementById("popup").style.visibility="hidden"};document.getElementById("toBefore").onmouseover=function(){if(document.getElementById("cover").className!="starting"){document.getElementById("popup").style.top="505px";document.getElementById("popup").style.left="285px";document.getElementById("popup").innerHTML="이전 대화로 돌아가기";document.getElementById("popup").style.visibility="visible"}};document.getElementById("toBefore").onmouseout=function(){document.getElementById("popup").style.backgroundColor="yellow";document.getElementById("popup").style.visibility="hidden"};document.getElementById("title").onmouseover=function(){if(document.getElementById("cover").className!="starting"){document.getElementById("popup").style.top="505px";document.getElementById("popup").style.left="432px";document.getElementById("popup").innerHTML="현재 진행중인 퀘스트 대상";document.getElementById("popup").style.visibility="visible"}};document.getElementById("title").onmouseout=function(){document.getElementById("popup").style.visibility="hidden"};document.getElementById("now").onmouseover=function(){if(document.getElementById("cover").className!="starting"){document.getElementById("popup").style.top="505px";document.getElementById("popup").style.left="555px";document.getElementById("popup").innerHTML="현재 페이지 / 전체 페이지";document.getElementById("popup").style.visibility="visible"}};document.getElementById("now").onmouseout=function(){document.getElementById("popup").style.visibility="hidden"};getPage(0)})})}else{alert("※ 오류 : 불러올 대사집이 지정되지 않았습니다.		\n대사 위치 : ./91/1/"+tempFile+".js");return false}};